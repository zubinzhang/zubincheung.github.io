<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>TSL握手小记 | Zubin | Later Equals Never</title>

  
  <meta name="author" content="Zubin">
  

  
  <meta name="description" content="超文本传输安全协议（英语：Hypertext Transfer Protocol Secure，缩写：HTTPS，常称为 HTTP over TLS，HTTP over SSL 或 HTTP Secure）是一种通过计算机网络进行安全通信的传输协议。
HTTPS 经由 HTTP 进行通信，但利用 S">
  

  
  
  <meta name="keywords" content="学习笔记,计算机网络">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="TSL握手小记"/>

  <meta property="og:site_name" content="Zubin"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Zubin" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Zubin</a>
    </h1>
    <p class="site-description">Later Equals Never</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>TSL握手小记</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/blog/9a691d3d.html" rel="bookmark">
        <time class="entry-date published" datetime="2021-06-30T07:29:09.000Z">
          2021-06-30
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p><strong>超文本传输安全协议</strong>（英语：Hypertext Transfer Protocol Secure，缩写：HTTPS，常称为 HTTP over TLS，HTTP over SSL 或 HTTP Secure）是一种通过计算机网络进行安全通信的传输协议。</p>
<p>HTTPS 经由 HTTP 进行通信，但利用 SSL&#x2F;TLS 协议来加密数据包。</p>
<p>TLS 协议位于传输层之上，应用层之下，使用了两种加密技术，分别为：<strong>对称加密</strong>和<strong>非对称加密</strong>。使用非对称密钥加密用于传输对称密钥来保证传输过程的安全性，之后使用对称密钥加密进行通信来保证通信过程的效率。</p>
<h3 id="对称加密"><a href="#对称加密" class="headerlink" title="对称加密"></a>对称加密</h3><p>加密与解密使用<strong>相同</strong>密钥。</p>
<ul>
<li>优点：运算速度快；</li>
<li>缺点：无法安全地将密钥传输给通信方。</li>
</ul>
<h3 id="非对称加密"><a href="#非对称加密" class="headerlink" title="非对称加密"></a>非对称加密</h3><p>加密与解密使用<strong>不同</strong>密钥，包含一个<strong>公钥</strong>和一个<strong>私钥</strong>。明文既可以用公钥加密，用私钥解密；还可以用来进行签名，用私钥加密，用公钥解密。</p>
<ul>
<li>优点：运算速度快；</li>
<li>缺点：无法安全地将密钥传输给通信方。</li>
</ul>
<h3 id="TLS-握手过程"><a href="#TLS-握手过程" class="headerlink" title="TLS 握手过程"></a>TLS 握手过程</h3><p><img src="https://github.com/zubincheung/blog-images/blob/master/2019/467143fa-a209-45d4-b7ed-ad0891dc9b2e.png?raw=true"></p>
<ol>
<li><p>客户端先向服务端发送一个加密通信请求，叫做 ClientHello 请求。该请求包含以下信息：</p>
<ul>
<li>客户端支持的 SSL 或者 TLS 版本</li>
<li>客户端生成的随机数</li>
<li>客户端支持的加密算法</li>
</ul>
</li>
<li><p>服务端收到客户端请求后，向客户端发出响应，叫做 ServerHello。该响应包含以下信息：</p>
<ul>
<li>服务端从客户端提供的 SSL 或 TLS 列表中选择的版本</li>
<li>Sesstion ID 和 另外生成的随机数</li>
<li>服务端的数字证书</li>
<li>确认使用的加密算法</li>
</ul>
</li>
<li><p>客户端收到服务端响应后，首先校验服务端发来的数字证书决定是否继续通信。</p>
</li>
<li><p>证书校验通过，会像服务端发送以下信息：</p>
<ul>
<li>生成一个随机数，并对这个随机数用从服务端数字证书中取出的公钥加密</li>
</ul>
</li>
<li><p>如果服务端发送了一个客户端证书请求，客户端将会发送一个用客户端私钥加密的随机字符串和客户端的数字证书，或者没有数字证书的警告。</p>
</li>
<li><p>服务端接受并验证客户端证书，通过这三个随机值按照之前约定的加密方式生成密钥。</p>
</li>
<li><p>客户端向服务端发送一条完成的消息，该消息使用密钥加密，表示握手的客户端部分已经完成。</p>
</li>
<li><p>服务端向客户端发送一条完成的消息，该消息使用密钥加密，表示握手的服务端部分已经完成</p>
</li>
<li><p>在 SSL 或 TLS 会话期间，服务端和客户端现在可以交换使用共享密钥对称加密的消息</p>
</li>
</ol>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/其他/">其他</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/学习笔记/">学习笔记</a><a href="/tags/计算机网络/">计算机网络</a>
    </span>
    

    </div>

    
  </div>
</article>

  






    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2022 Zubin
    
  </p>
</footer>
    
    
  </div>
</div>
</body>
</html>