<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>数据库设计-约束 | Zubin | Later Equals Never</title>

  
  <meta name="author" content="Zubin">
  

  
  <meta name="description" content="数据库约束是为了保证数据的完整性(正确性)而实现的一套机制。主要分为五大约束：

主键约束（Primay Key Coustraint）： 唯一性，非空性

123# 添加主键约束（将UserId作为主键）alter table UserId　　 add constraint PK_UserId primary key (UserId);


唯一约束 （Unique Counstraint）：唯一性，可以空，但只能有一个

123# 添加唯一约束（身份证号唯一，因为每个人的都不一样）alter table UserInfo　　 add constraint UQ_IDNumber unique(IdentityCardNumber);


检查约束 （Check Counstraint）：对该列数据的范格式的限制（如：年性别等）

12345# 添加检查约束 （对年龄加以限定 20-40 岁之间）alter table UserInfo　　 add constraint CK_UserAge check (UserAge between 20 and 40);alter table UserInfo　　 add constraint CK_UserSex check (UserSex=’男’ or UserSex=’女′);


默认约束 （Default Counstraint）：该数据的默认值

123# 添加默认约束（如果地址不填 默认为“地址不详”）alter table UserInfo　　 add constraint DF_UserAddress default (‘地址不详’) for UserAddress;


外键约束 （Foreign Key Counstraint）：需要建立两表间的关系并引用主表的列

123# 添加外键约束 (主表 UserInfo 和从表 UserOrder 建立关系，关联字段 UserId)alter table UserOrder　　 add constraint FK_UserId_UserId foreign key(UserId)references UserInfo(UserId);">
  

  
  
  <meta name="keywords" content="MySQL,数据库设计">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="数据库设计-约束"/>

  <meta property="og:site_name" content="Zubin"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Zubin" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Zubin</a>
    </h1>
    <p class="site-description">Later Equals Never</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>数据库设计-约束</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/blog/adc3b0ca.html" rel="bookmark">
        <time class="entry-date published" datetime="2018-09-03T07:00:29.000Z">
          2018-09-03
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>数据库约束是为了保证数据的完整性(正确性)而实现的一套机制。主要分为五大约束：</p>
<ol>
<li><strong>主键约束</strong>（Primay Key Coustraint）： 唯一性，非空性</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 添加主键约束（将UserId作为主键）</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> UserId</span><br><span class="line">　　 <span class="keyword">add</span> <span class="keyword">constraint</span> PK_UserId <span class="keyword">primary</span> key (UserId);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>唯一约束</strong> （Unique Counstraint）：唯一性，可以空，但只能有一个</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 添加唯一约束（身份证号唯一，因为每个人的都不一样）</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> UserInfo</span><br><span class="line">　　 <span class="keyword">add</span> <span class="keyword">constraint</span> UQ_IDNumber <span class="keyword">unique</span>(IdentityCardNumber);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>检查约束</strong> （Check Counstraint）：对该列数据的范格式的限制（如：年性别等）</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 添加检查约束 （对年龄加以限定 <span class="number">20</span><span class="number">-40</span> 岁之间）</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> UserInfo</span><br><span class="line">　　 <span class="keyword">add</span> <span class="keyword">constraint</span> CK_UserAge <span class="keyword">check</span> (UserAge <span class="keyword">between</span> <span class="number">20</span> <span class="keyword">and</span> <span class="number">40</span>);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> UserInfo</span><br><span class="line">　　 <span class="keyword">add</span> <span class="keyword">constraint</span> CK_UserSex <span class="keyword">check</span> (UserSex<span class="operator">=</span>’男’ <span class="keyword">or</span> UserSex<span class="operator">=</span>’女′);</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><strong>默认约束</strong> （Default Counstraint）：该数据的默认值</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 添加默认约束（如果地址不填 默认为“地址不详”）</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> UserInfo</span><br><span class="line">　　 <span class="keyword">add</span> <span class="keyword">constraint</span> DF_UserAddress <span class="keyword">default</span> (‘地址不详’) <span class="keyword">for</span> UserAddress;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><strong>外键约束</strong> （Foreign Key Counstraint）：需要建立两表间的关系并引用主表的列</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 添加外键约束 (主表 UserInfo 和从表 UserOrder 建立关系，关联字段 UserId)</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> UserOrder</span><br><span class="line">　　 <span class="keyword">add</span> <span class="keyword">constraint</span> FK_UserId_UserId <span class="keyword">foreign</span> key(UserId)<span class="keyword">references</span> UserInfo(UserId);</span><br></pre></td></tr></table></figure>

<span id="more"></span>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/数据库/">数据库</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/MySQL/">MySQL</a><a href="/tags/数据库设计/">数据库设计</a>
    </span>
    

    </div>

    
  </div>
</article>

  






    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2022 Zubin
    
  </p>
</footer>
    
    
  </div>
</div>
</body>
</html>