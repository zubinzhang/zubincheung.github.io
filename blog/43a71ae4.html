<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>MySQL索引小结 | Zubin | Later Equals Never</title>

  
  <meta name="author" content="Zubin">
  

  
  <meta name="description" content="索引的作用索引的出现其实就是为了提高数据查询的效率，用于快速找出在某个列中有一特定值的行。
索引的常见模型实现索引的方式却有很多种,常见的索引模型有哈希表、有序数组、搜索树

哈希表：键 - 值(key - value)
哈希的思路：把值放在数组里，用一个哈希函数把 key 换算成一个确定的位置，然">
  

  
  
  <meta name="keywords" content="学习笔记,MySQL">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="MySQL索引小结"/>

  <meta property="og:site_name" content="Zubin"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Zubin" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Zubin</a>
    </h1>
    <p class="site-description">Later Equals Never</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>MySQL索引小结</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/blog/43a71ae4.html" rel="bookmark">
        <time class="entry-date published" datetime="2019-01-05T02:13:33.000Z">
          2019-01-05
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h3 id="索引的作用"><a href="#索引的作用" class="headerlink" title="索引的作用"></a>索引的作用</h3><p>索引的出现其实就是为了提高数据查询的效率，用于快速找出在某个列中有一特定值的行。</p>
<h3 id="索引的常见模型"><a href="#索引的常见模型" class="headerlink" title="索引的常见模型"></a>索引的常见模型</h3><p>实现索引的方式却有很多种,常见的索引模型有<strong>哈希表</strong>、<strong>有序数组</strong>、<strong>搜索树</strong></p>
<ul>
<li>哈希表：键 - 值(key - value)<ul>
<li>哈希的思路：把值放在数组里，用一个哈希函数把 key 换算成一个确定的位置，然后把 value 放在数组的这个位置</li>
<li>哈希冲突的处理办法：链表</li>
<li>适用场景：只有等值查询的场景</li>
</ul>
</li>
</ul>
<ul>
<li>有序数组：按顺序存储。<ul>
<li>查询用二分法就可以快速查询，时间复杂度是：O(log(N))</li>
<li>优点：在等值查询和范围查询场景中的性能就都非常优秀</li>
<li>缺点：往中间插入一个记录就必须得挪动后面所有的记录，更新效率低</li>
<li>适用场景：静态存储引擎。</li>
</ul>
</li>
</ul>
<ul>
<li>二叉搜索树<ul>
<li>特点：每个节点的左儿子小于父节点，父节点又小于右儿子</li>
<li>查询时间复杂度： O(log(N))</li>
<li>更新时间复杂度： O(log(N))</li>
<li>适用场景：数据库存储大多不适用二叉树，因为树高过高，会适用 N 叉树</li>
</ul>
</li>
</ul>
<h3 id="InnoDB-中的索引模型"><a href="#InnoDB-中的索引模型" class="headerlink" title="InnoDB 中的索引模型"></a>InnoDB 中的索引模型</h3><p>在 InnoDB 中，表都是根据主键顺序以索引的形式存放的，这种存储方式的表称为索引组织表。InnoDB 使用了 B+ 树索引模型，所以数据都是存储在 B+ 树中的。</p>
<h3 id="索引类型：主键索引、非主键索引"><a href="#索引类型：主键索引、非主键索引" class="headerlink" title="索引类型：主键索引、非主键索引"></a>索引类型：主键索引、非主键索引</h3><ul>
<li>主键索引的叶子节点存的是整行的数据(聚簇索引)</li>
<li>非主键索引的叶子节点内容是主键的值(二级索引)</li>
<li>区别：主键索引只要搜索 ID 这个 B+Tree 即可拿到数据。普通索引先搜索索引拿到主键值，再到主键索引树搜索一次(<strong>回表</strong>)</li>
</ul>
<h3 id="索引维护"><a href="#索引维护" class="headerlink" title="索引维护"></a>索引维护</h3><ul>
<li>一个数据页满了，按照 B+Tree 算法，新增加一个数据页，叫做<strong>页分裂</strong>，会导致性能下降。空间利用率降低大概 50%。</li>
<li>当相邻的两个数据页利用率很低的时候会做<strong>数据页合并</strong>，合并的过程是分裂过程的<strong>逆</strong>过程。</li>
<li>从性能和存储空间方面考量，<strong>自增主键</strong>往往是更合理的选择。</li>
</ul>
<h3 id="覆盖索引"><a href="#覆盖索引" class="headerlink" title="覆盖索引"></a>覆盖索引</h3><p>回到主键索引树搜索的过程，我们称为<strong>回表</strong></p>
<p>如果查询条件使用的是普通索引（或是联合索引的最左原则字段），查询结果是联合索引的字段或是主键，不用回表操作，直接返回结果，减少 IO 磁盘读写读取正行数据</p>
<h3 id="最左前缀"><a href="#最左前缀" class="headerlink" title="最左前缀"></a>最左前缀</h3><p><strong>联合索引</strong>的最左 N 个字段，也可以是<strong>字符串索引</strong>的最左 M 个字符</p>
<h3 id="联合索引"><a href="#联合索引" class="headerlink" title="联合索引"></a>联合索引</h3><p>根据创建联合索引的顺序，以最<strong>左</strong>原则进行 where 检索，比如（age，name）以 age&#x3D;1 或 age&#x3D; 1 and name&#x3D;‘张三’可以使用索引，单以 name&#x3D;‘张三’ 不会使用索引，考虑到存储空间的问题，还请根据业务需求，将查找频繁的数据进行靠左创建索引。</p>
<h3 id="索引下推"><a href="#索引下推" class="headerlink" title="索引下推"></a>索引下推</h3><p><code>like &#39;hello%’and age &gt;10</code> 检索，MySQL5.6 版本之前，会对匹配的数据进行回表查询。5.6 版本后，会先过滤掉 age&lt;10 的数据，再进行回表查询，减少回表率，提升检索速度</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/数据库/">数据库</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/学习笔记/">学习笔记</a><a href="/tags/MySQL/">MySQL</a>
    </span>
    

    </div>

    
  </div>
</article>

  






    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2022 Zubin
    
  </p>
</footer>
    
    
  </div>
</div>
</body>
</html>